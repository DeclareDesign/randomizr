% Generated by roxygen2 (4.1.0.9001): do not edit by hand
% Please edit documentation in R/randomizr.r
\name{condition_probs}
\alias{condition_probs}
\title{Calculate Probability of Observed Condition}
\usage{
condition_probs(Z, N = NULL, prob = NULL, prob_each = NULL, m = NULL,
  m_each = NULL, block_var = NULL, block_m = NULL, block_prob = NULL,
  clust_var = NULL, num_arms = NULL, condition_names = NULL, design,
  return_design = FALSE)
}
\arguments{
\item{Z}{a random assignment generated by `randomizr`. Use the identical parameters when generating the assignment and calculating the probabilities.}

\item{N}{the total number of units in the experimental sample}

\item{prob}{if specified, a two-group design is assumed. prob is the probability of assignment to treatment.}

\item{prob_each}{a numeric giving the probability of assignment to each treatment arm. Must sum to 1.  Please note that due to rounding, these probabilities are approximate. For finer control, please use m_each.}

\item{m}{if specified, a two-group design is assumed.  m is the total number of units to be assigned to treatment. Should only be specified for a two group design in which exactly m of N units to treatment. If not specified, half of the sample (N/2) will be assigned to treatment. Is null by default. In clustered designs, exactly m of N clusters is assigned to treatment. If not specified, half of the clusters will be assigned to treatment.}

\item{m_each}{a numeric vector giving the size of each treatment group. Must sum to N. If unspecified, equally sized (rounded) groups will be assumed.}

\item{block_var}{A vector of length N that includes the blocking variable}

\item{block_m}{A matrix whose number of rows is equal to the number of blocks and whose number of columns is equal to the number of treatment arms. The rows should respect the alphabetical ordering of the blocks as determined by sort(unique(block_var). The columns should be in the order of condition_names, if specified.}

\item{block_prob}{A vector whose length is equal to the number of treatment assignments. When specified, block_prob assigns the same (within rounding) proportion of each block to each treatment condition, using complete random assignment. block_prob must sum to 1.}

\item{clust_var}{a vector of length N that describes which cluster each unit belongs to.}

\item{num_arms}{the total number of treatment arms. If unspecified, will be determined from the length of m_each or condition_names.}

\item{condition_names}{a character vector giving the names of the treatment groups.  If unspecified, the treatment groups will be names T1, T2, T3, etc.}

\item{design}{a string that specifies the design used.  Can only take the values "simple", "complete", "block", or "cluster".}

\item{return_design}{a logical value that specifies whether a dataframe with Z, the probabilities of each condition, and the observed condition probability should be returned.  Defaults to FALSE.}
}
\description{
This function calculates the probability that each experimental unit is in the experimental condition that it is in.. You specify designs exactly as you do in `simple_ra()`, `complete_ra()`, `block_ra()` or `cluster_ra()`, adding only the `design` argument.
Especially when units have different probabilities of assignment, this function can be useful for calculating inverse probability weights.
}
\examples{
N <- 100
Z <- simple_ra(N)
condition_probs(Z=Z, N=N, design = "simple")

Z <- simple_ra(N=N,prob_each = c(.1, .2, .7), condition_names = c("A", "B", "C"))
condition_probs(Z=Z, N=N,prob_each = c(.1, .2, .7), condition_names = c("A", "B", "C"),
               design = "simple", return_design=TRUE)

# Complete designs
N <- 100
Z <- complete_ra(N=N, m = 45)
condition_probs(Z=Z, N=N, m = 45, design = "complete")

Z <- complete_ra(N=N, m_each = c(10, 20, 70))
condition_probs(Z=Z, N=N, m_each = c(10, 20, 70),
             design = "complete", return_design=TRUE)

# Block designs

block_var <- rep(c("A", "B","C"), times=c(50, 100, 200))
block_m <- rbind(c(30, 20),
                 c(50, 50),
                 c(100, 100))
Z <- block_ra(block_var=block_var, block_m=block_m)
condition_probs(Z=Z, block_var=block_var, block_m=block_m, design="block")

Z <- block_ra(block_var=block_var, block_prob=c(.1, .1, .8),
               condition_names=c("control", "placebo", "treatment"))
condition_probs(Z=Z, block_var=block_var, block_prob=c(.1, .1, .8),
               condition_names=c("control", "placebo", "treatment"),
               design="block")

# Cluster designs

clust_var <- rep(letters, times=1:26)
Z <- cluster_ra(clust_var=clust_var, m_each=c(7, 7, 12))
condition_probs(Z=Z, clust_var=clust_var, m_each=c(7, 7, 12),
design="cluster", return_design=TRUE)
}
\keyword{assignment}
\keyword{random}

